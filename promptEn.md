# Anthropic Claude 프롬프트 엔지니어링 통합 매뉴얼

## 목차
1. [프롬프트 엔지니어링 개요](#프롬프트-엔지니어링-개요)
2. [기본 원칙](#기본-원칙)
3. [핵심 기법들](#핵심-기법들)
   - [1. 명확하고 직접적으로 작성하기](#1-명확하고-직접적으로-작성하기)
   - [2. 예시 사용하기 (멀티샷 프롬프팅)](#2-예시-사용하기-멀티샷-프롬프팅)
   - [3. 사고 과정 활용하기 (Chain of Thought)](#3-사고-과정-활용하기-chain-of-thought)
   - [4. XML 태그 사용하기](#4-xml-태그-사용하기)
   - [5. 역할 부여하기 (시스템 프롬프트)](#5-역할-부여하기-시스템-프롬프트)
   - [6. 응답 프리필하기](#6-응답-프리필하기)
   - [7. 복잡한 프롬프트 체이닝](#7-복잡한-프롬프트-체이닝)
   - [8. 긴 컨텍스트 활용 팁](#8-긴-컨텍스트-활용-팁)
4. [Claude 4 특화 모범 사례](#claude-4-특화-모범-사례)
5. [실전 활용 팁](#실전-활용-팁)

---

## 프롬프트 엔지니어링 개요

### 프롬프트 엔지니어링이란?
프롬프트 엔지니어링은 AI 모델에게 제공하는 입력 지시사항을 신중하게 설계하여 원하는 출력을 얻는 과정입니다. 이는 컨텍스트 제공, 구조화, 예시, 제약 조건 등을 포함합니다.

### 왜 프롬프트 엔지니어링인가? (vs 파인튜닝)
- **리소스 효율성**: GPU나 대용량 메모리 불필요, 텍스트 입력만 필요
- **비용 효과성**: 기본 모델 사용으로 더 저렴
- **시간 절약**: 즉각적인 결과 제공
- **유연성**: 다양한 접근법을 빠르게 시도하고 반복 가능
- **일반 지식 보존**: 모델의 광범위한 능력 유지

### 시작하기 전에
1. **명확한 성공 기준 정의**
2. **경험적 테스트 방법 수립**
3. **초안 프롬프트 준비**

---

## 기본 원칙

### 황금률: "동료 테스트"
> 프롬프트를 동료에게 보여주세요. 그들이 혼란스러워한다면, Claude도 마찬가지일 것입니다.

### Claude를 대하는 자세
Claude를 "기억상실증에 걸린 똑똑한 신입 사원"으로 생각하세요:
- 귀하의 규범, 스타일, 가이드라인에 대한 컨텍스트가 없음
- 명확한 지시가 필요함
- 구체적인 설명이 성능 향상의 열쇠

---

## 핵심 기법들

### 1. 명확하고 직접적으로 작성하기

**핵심 원칙:**
- 불필요한 표현 제거
- 평이한 언어 사용
- 모호함 회피
- 컨텍스트 정보 제공

**예시:**
```
❌ 나쁜 예:
"텍스트를 좀 요약해줄 수 있을까?"

✅ 좋은 예:
"다음 기사를 3개의 핵심 포인트로 요약해주세요. 각 포인트는 한 문장으로 작성하고, 
기술 전문가가 아닌 일반 독자도 이해할 수 있도록 작성해주세요."
```

### 2. 예시 사용하기 (멀티샷 프롬프팅)

**개념:**
- Zero-shot: 예시 없음
- One-shot: 1개 예시
- Few-shot: 2개 이상 예시

**장점:**
- 정확성: 지시사항 오해 감소
- 일관성: 균일한 구조와 스타일 유지
- 성능: 복잡한 작업 처리 능력 향상

**예시:**
```
고객 피드백을 긍정/부정으로 분류해주세요.

예시:
피드백: "제품이 훌륭하고 배송도 빨랐어요!"
분류: 긍정

피드백: "품질이 실망스럽고 환불하고 싶습니다."
분류: 부정

피드백: "포장은 좋았지만 제품이 기대와 달랐어요."
분류: 부정

새로운 피드백: "정말 만족스러운 구매였습니다!"
분류:
```

### 3. 사고 과정 활용하기 (Chain of Thought)

**개념:** Claude가 문제를 단계별로 분해하여 사고하도록 유도

**구현 방법:**
1. **기본형**: "단계별로 생각해보세요" 추가
2. **가이드형**: 구체적인 사고 단계 제시
3. **구조화형**: XML 태그로 사고와 답변 분리

**예시:**
```xml
다음 수학 문제를 해결해주세요.

<thinking>
1단계: 문제 이해하기
2단계: 필요한 공식 확인
3단계: 계산 수행
4단계: 답변 검증
</thinking>

<answer>
최종 답변을 여기에 작성
</answer>
```

### 4. XML 태그 사용하기

**장점:**
- 명확성: 프롬프트의 다른 부분들을 명확히 구분
- 정확성: Claude의 오해로 인한 오류 감소
- 유연성: 쉬운 수정과 관리
- 파싱 가능성: 출력에서 특정 부분 추출 용이

**모범 사례:**
```xml
<instructions>
이메일을 더 정중하게 다시 작성해주세요.
</instructions>

<email>
내일 6시에 나타나. 내가 CEO니까 그렇게 하라고.
</email>

<requirements>
- 원래 의미는 유지
- 정중한 어조 사용
- 전문적인 형식 유지
</requirements>
```

### 5. 역할 부여하기 (시스템 프롬프트)

**개념:** Claude에게 특정 역할이나 전문성을 부여하여 성능 향상

**예시:**
```python
system_prompt = "당신은 Fortune 500 기업의 숙련된 데이터 과학자입니다."

# 역할이 있을 때: 더 깊이 있는 분석과 전문적 통찰 제공
# 역할이 없을 때: 일반적이고 표면적인 답변
```

### 6. 응답 프리필하기

**개념:** Assistant 메시지의 시작 부분을 미리 작성하여 Claude의 응답 방향 제어

**용도:**
- 출력 형식 제어
- JSON 출력 강제
- 캐릭터 일관성 유지
- 특정 스타일 유도

**예시:**
```python
messages = [
    {"role": "user", "content": "제품 설명에서 이름, 가격, 색상을 추출해 JSON으로 출력하세요."},
    {"role": "assistant", "content": "{"}  # JSON으로 시작하도록 강제
]
```

### 7. 복잡한 프롬프트 체이닝

**개념:** 복잡한 작업을 여러 개의 작은 하위 작업으로 분해

**장점:**
- 정확성: 각 하위 작업에 집중
- 명확성: 단순한 지시사항
- 추적 가능성: 문제 지점 쉽게 파악

**예시 워크플로우:**
```
1단계: 문서 분석 → 주요 정보 추출
2단계: 추출된 정보 → 구조화된 요약 생성
3단계: 요약 → 실행 가능한 인사이트 도출
4단계: 인사이트 → 최종 보고서 작성
```

### 8. 긴 컨텍스트 활용 팁

**모범 사례:**
1. **긴 문서는 상단에 배치**: 20K+ 토큰의 문서는 프롬프트 상단에
2. **질문은 끝에 배치**: 복잡한 멀티 문서 입력에서 최대 30% 성능 향상
3. **XML 태그로 구조화**:
   ```xml
   <documents>
     <document index="1">
       <source>annual_report_2023.pdf</source>
       <document_content>{{내용}}</document_content>
     </document>
   </documents>
   ```
4. **인용문 기반 응답**: 답변 전에 관련 부분을 인용하도록 요청

---

## Claude 4 특화 모범 사례

### 1. 명확하고 구체적인 지시
- Claude 4는 이전 버전보다 정확한 지시 따르기에 최적화됨
- "추가적인" 행동을 원한다면 명시적으로 요청 필요

### 2. 맥락과 동기 제공
```
"텍스트 음성 변환 엔진이 읽을 예정이므로 생략 부호를 사용하지 마세요. 
발음할 수 없기 때문입니다."
```

### 3. 세부사항과 예시 주의
- 프롬프트의 형식 스타일이 응답에 영향
- 예시가 권장하려는 행동과 일치하는지 확인

### 4. 병렬 도구 사용
- Claude 4는 병렬 도구 실행에 뛰어남
- "최대 효율성을 위해 여러 독립적 작업을 순차적이 아닌 동시에 실행하세요"

### 5. 임시 파일 활용
- 코드 작업 시 테스트와 반복을 위한 임시 파일 생성 가능
- 필요시 정리 지시 포함

---

## 실전 활용 팁

### 1. 반복적 개선
- 프롬프트 엔지니어링은 반복적 과정
- 각 시도에서 배운 점을 다음에 적용

### 2. 도구 활용
- Anthropic Console의 Prompt Improver 사용
- 평가 도구로 성능 측정
- 예시 관리 기능 활용

### 3. 일반적인 함정 피하기
- 너무 강하게 금지하면 역효과 (역심리 효과)
- 일반적인 예시보다 맥락에 맞는 예시 사용
- 지나치게 복잡한 단일 프롬프트보다 체이닝 고려

### 4. 성능 최적화
- 독립적인 하위 작업은 병렬로 실행
- 긴 컨텍스트는 구조화하여 처리
- 응답 검증을 위한 루프 구성

### 5. 디버깅
- Claude가 단계를 놓치거나 성능이 저하되면 해당 단계를 독립적으로 분리
- XML 태그로 입력과 지시사항 명확히 구분
- "동료 테스트"로 프롬프트 명확성 확인

---

## 마무리

효과적인 프롬프트 엔지니어링은 예술과 과학의 조합입니다. 이 매뉴얼의 기법들을 기반으로 하되, 구체적인 사용 사례에 맞게 실험하고 조정하는 것이 중요합니다. Claude를 똑똑하지만 맥락이 필요한 협력자로 대하면 최상의 결과를 얻을 수 있습니다.

더 자세한 정보는 [Anthropic 공식 문서](https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/overview)를 참조하세요.